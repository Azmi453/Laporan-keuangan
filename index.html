<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Line Coding Visualizer — HTML + JS</title>
  <style>
    /* Simple styling (mengganti Tailwind) */
    :root{
      --blue:#2563eb; --purple:#7c3aed; --green:#10b981; --amber:#f59e0b; --red:#ef4444;
      --card-bg: #fff; --muted:#6b7280;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{background:linear-gradient(135deg,#f8fafc,#e6f0ff); margin:0; padding:24px; color:#0f172a;}
    .container{max-width:1100px;margin:0 auto;}
    .card{background:var(--card-bg); border-radius:12px; box-shadow:0 6px 18px rgba(2,6,23,0.06); margin-bottom:20px; overflow:hidden; border:1px solid #e6eefc;}
    .card-header{padding:18px 20px; background:linear-gradient(90deg,var(--blue),var(--purple)); color:white;}
    .card-content{padding:18px 20px;}
    input[type="text"]{width:100%;padding:12px;border-radius:8px;border:2px solid #cfe1ff;font-family:monospace;font-size:16px;}
    .muted{color:var(--muted)}
    .binary-block{background:#fff;padding:12px;border-radius:8px;border:1px solid #e6eefc}
    .tech-card{border-radius:10px;padding:14px;margin-bottom:14px;border:1px solid #e9eef7}
    .tech-title{font-weight:700;margin:0 0 6px 0}
    .wave-wrap{overflow-x:auto;padding:10px;background:#fff;border-radius:8px;border:1px solid #e9eef7}
    .small{font-size:13px}
    .hint{color:#b45309}
    .flex{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .char-box{display:inline-block;padding:6px 10px;border-radius:6px;background:#f8fafc;border:1px solid #e2eefc;font-weight:700}
    svg{display:block}
    .level-text{font-size:11px;fill:var(--muted);font-weight:700}
    .footer-strategy{background:linear-gradient(90deg,#fff7ed,#fffbeb);padding:12px;border-radius:8px;border:1px solid #fbe6bf}
    @media(max-width:640px){ .card-header .title{font-size:18px} }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="card-header">
        <div style="display:flex;align-items:center;gap:12px">
          <div style="font-size:26px">🎨</div>
          <div>
            <div class="title" style="font-size:20px;font-weight:800">Visualisasi Teknik Line Coding Digital</div>
            <div style="font-size:13px;opacity:.9;margin-top:6px">Ubah nama/teks menjadi sinyal digital (NRZ, RZ, Manchester, Miller, AMI)</div>
          </div>
        </div>
      </div>

      <div class="card-content">
        <label class="small" style="font-weight:700">✏️ Ketik Nama/Teks Kamu (otomatis UPPERCASE):</label>
        <input id="inputText" type="text" placeholder="Contoh: ANDI, BUDI, SITI..." />

        <p id="hintEmpty" class="hint small" style="margin-top:8px">💡 Mulai ketik nama kamu untuk melihat visualisasi!</p>

        <div id="results" style="margin-top:18px;display:none">
          <div class="binary-block">
            <h4 style="margin:0 0 8px 0">🔢 Langkah 1: Konversi ke Binary</h4>
            <div id="charList" style="display:flex;flex-direction:column;gap:8px"></div>

            <div style="margin-top:12px;border-top:1px solid #eef6ff;padding-top:12px">
              <div class="small" style="font-weight:700">📝 Full Binary String:</div>
              <div id="fullBinary" style="font-family:monospace;word-break:break-all;margin-top:6px;padding:8px;background:#fff;border-radius:6px;border:1px solid #eef6ff"></div>
              <div class="small muted" id="bitCount" style="margin-top:6px"></div>
            </div>
          </div>

          <div id="techniquesWrap" style="margin-top:18px"></div>

          <div class="card" style="margin-top:12px;border-radius:10px;box-shadow:none;border:1px solid #eef6ff">
            <div class="card-content">
              <h4 style="margin:0 0 8px 0">📚 Penjelasan Mudah untuk UTS</h4>
              <div style="display:grid;gap:10px">
                <div style="background:#eff6ff;padding:12px;border-left:4px solid #2563eb;border-radius:6px">
                  <strong>📊 NRZ-L</strong><div class="small">0 = garis di BAWAH, 1 = garis di ATAS. Paling gampang digambar.</div>
                </div>
                <div style="background:#f5f3ff;padding:12px;border-left:4px solid #7c3aed;border-radius:6px">
                  <strong>⚡ RZ</strong><div class="small">Setiap bit kembali ke tengah di pertengahan.</div>
                </div>
                <div style="background:#ecfdf5;padding:12px;border-left:4px solid #10b981;border-radius:6px">
                  <strong>📈 Manchester</strong><div class="small">0 = turun (High→Low), 1 = naik (Low→High). Dipakai di Ethernet.</div>
                </div>
                <div style="background:#fff7ed;padding:12px;border-left:4px solid #f59e0b;border-radius:6px">
                  <strong>🔄 Miller</strong><div class="small">1 lompat di awal, 0 tergantung sebelumnya.</div>
                </div>
                <div style="background:#fff1f2;padding:12px;border-left:4px solid #ef4444;border-radius:6px">
                  <strong>🔀 AMI</strong><div class="small">0 = tengah, 1 = +V/-V bergantian.</div>
                </div>
              </div>

              <div style="margin-top:12px" class="footer-strategy">
                <strong>🎯 Strategi Dapat Nilai Bagus:</strong>
                <ul style="margin:6px 0 0 16px" class="small muted">
                  <li>Hafalkan ASCII huruf nama kamu (setiap huruf 8 bit).</li>
                  <li>Fokus ke NRZ-L dan Manchester (paling sering keluar).</li>
                  <li>Gunakan penggaris untuk gambar rapi (nilai tambah).</li>
                </ul>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>
  </div>
 <!-- 🎵 Music Player -->
<div id="music-player" style="
  text-align:center;
  margin:40px auto;
  max-width:400px;
  background:linear-gradient(145deg,#e0e7ff,#f5f3ff);
  border-radius:16px;
  padding:25px;
  box-shadow:0 10px 25px rgba(0,0,0,0.1);
">
  <h3 style="font-size:22px;font-weight:700;margin-bottom:10px;color:#1e3a8a;">🎧 Playlist Belajar</h3>
  <p id="current-song" style="font-size:16px;margin-bottom:15px;font-weight:500;color:#4338ca;">Bergema Sampai Selamanya</p>
  
  <audio id="audio" src="./music/bergema.mp3"></audio>
  
  <!-- Progress bar -->
  <div id="progress-container" style="
    width:100%;
    height:6px;
    background:#e0e7ff;
    border-radius:3px;
    overflow:hidden;
    margin-bottom:15px;
  ">
    <div id="progress" style="
      height:100%;
      width:0%;
      background:#6366f1;
      transition:width 0.3s linear;
    "></div>
  </div>

  <!-- Controls -->
  <div style="display:flex;justify-content:center;gap:20px;">
    <button onclick="prevSong()" style="background:#c7d2fe;border:none;padding:12px;border-radius:50%;cursor:pointer;">⏮️</button>
    <button onclick="playPause()" id="play-btn" style="background:#818cf8;color:white;border:none;padding:12px 20px;border-radius:25px;cursor:pointer;">▶️ Play</button>
    <button onclick="nextSong()" style="background:#c7d2fe;border:none;padding:12px;border-radius:50%;cursor:pointer;">⏭️</button>
  </div>
</div>

<script>
  const songs = [
    { title: "Bergema Sampai Selamanya", src: "./music/bergema.mp3" },
    { title: "Lihat Kebunku", src: "./music/kebunku.mp3" },
    { title: "Mangu", src: "./music/mangu.mp3" },
    { title: "Monolog", src: "./music/monolog.mp3" },
    { title: "Halu", src: "./music/halu.mp3" },
    { title: "Ketika Cinta Bertasbih", src: "./music/cintayangbertasbih.mp3" },
  ];

  let currentSong = 0;
  const audio = document.getElementById('audio');
  const currentSongTitle = document.getElementById('current-song');
  const progress = document.getElementById('progress');
  const playBtn = document.getElementById('play-btn');

  function playPause() {
    if (audio.paused) {
      audio.play();
      playBtn.textContent = "⏸️ Pause";
      playBtn.style.background = "#4f46e5";
    } else {
      audio.pause();
      playBtn.textContent = "▶️ Play";
      playBtn.style.background = "#818cf8";
    }
  }

  function nextSong() {
    currentSong = (currentSong + 1) % songs.length;
    changeSong();
  }

  function prevSong() {
    currentSong = (currentSong - 1 + songs.length) % songs.length;
    changeSong();
  }

  function changeSong() {
    audio.src = songs[currentSong].src;
    currentSongTitle.textContent = songs[currentSong].title;
    audio.play();
    playBtn.textContent = "⏸️ Pause";
    playBtn.style.background = "#4f46e5";
  }

  audio.addEventListener('ended', nextSong);

  // update progress bar
  audio.addEventListener('timeupdate', () => {
    const progressPercent = (audio.currentTime / audio.duration) * 100;
    progress.style.width = `${progressPercent}%`;
  });
</script>

  <script>
    // Utility: convert text -> array of {char, ascii, binary}
    function textToBinary(text) {
      return Array.from(text).map(ch => {
        const ascii = ch.charCodeAt(0);
        const binary = ascii.toString(2).padStart(8, '0');
        return { char: ch, ascii, binary };
      });
    }

    // Prepare bits array (all bits concatenated)
    function bitsFromBinaryData(binaryData) {
      return binaryData.map(d => d.binary).join('').split('');
    }

    // Wave generators (adapted from React version)
    function generateNRZ(bits) {
      let path = 'M 0 50';
      bits.forEach((bit, i) => {
        const x = i * 15;
        const y = bit === '1' ? 10 : 90;
        if (i === 0) {
          path += ` L ${x} ${y}`;
        }
        path += ` L ${x + 15} ${y}`;
      });
      return path;
    }

    function generateRZ(bits) {
      let path = 'M 0 50';
      bits.forEach((bit, i) => {
        const x = i * 15;
        const y = bit === '1' ? 10 : 90;
        path += ` L ${x} ${y} L ${x + 7.5} ${y} L ${x + 7.5} 50 L ${x + 15} 50`;
      });
      return path;
    }

    function generateManchester(bits) {
      let path = 'M 0 ';
      bits.forEach((bit, i) => {
        const x = i * 15;
        if (i === 0) {
          path += bit === '1' ? '90' : '10';
        }
        if (bit === '1') {
          path += ` L ${x + 7.5} 90 L ${x + 7.5} 10 L ${x + 15} 10`;
        } else {
          path += ` L ${x + 7.5} 10 L ${x + 7.5} 90 L ${x + 15} 90`;
        }
      });
      return path;
    }

    function generateMiller(bits) {
      let path = 'M 0 50';
      let currentLevel = 50; // 10 for top, 90 bottom in other functions - we'll toggle
      let prevBit = '0';
      // We'll interpret currentLevel 10 => top, 90 => bottom; start at middle 50
      bits.forEach((bit, i) => {
        const x = i * 15;
        if (bit === '1') {
          // change level
          // swap between top (10) and bottom (90)
          currentLevel = (currentLevel === 10) ? 90 : 10;
          path += ` L ${x} ${currentLevel} L ${x + 15} ${currentLevel}`;
        } else {
          if (prevBit === '0') {
            const midLevel = (currentLevel === 10) ? 90 : 10;
            path += ` L ${x + 7.5} ${currentLevel} L ${x + 7.5} ${midLevel} L ${x + 15} ${midLevel}`;
            currentLevel = midLevel;
          } else {
            path += ` L ${x + 15} ${currentLevel}`;
          }
        }
        prevBit = bit;
      });
      return path;
    }

    function generateAMI(bits) {
      let path = 'M 0 50';
      let lastLevel = 10; // alternate between 10 and 90 for +V / -V
      bits.forEach((bit, i) => {
        const x = i * 15;
        if (bit === '1') {
          const y = lastLevel === 10 ? 90 : 10;
          // go to center first, then to level, then back to center at the end of bit
          path += ` L ${x} 50 L ${x} ${y} L ${x + 15} ${y} L ${x + 15} 50`;
          lastLevel = y;
        } else {
          // 0 stays at 0V (middle)
          path += ` L ${x + 15} 50`;
        }
      });
      return path;
    }

    // DOM refs
    const inputText = document.getElementById('inputText');
    const hintEmpty = document.getElementById('hintEmpty');
    const results = document.getElementById('results');
    const charList = document.getElementById('charList');
    const fullBinary = document.getElementById('fullBinary');
    const bitCount = document.getElementById('bitCount');
    const techniquesWrap = document.getElementById('techniquesWrap');

    // Techniques metadata
    function getTechniques(bits, binaryData, svgWidth) {
      return [
        { name: 'NRZ-L (Non-Return to Zero Level)', path: generateNRZ(bits), color: '#3b82f6', desc: '0 = garis di BAWAH, 1 = garis di ATAS', simple: 'PALING MUDAH! Kayak garis lurus aja', icon:'📊' },
        { name: 'RZ (Return to Zero)', path: generateRZ(bits), color: '#8b5cf6', desc: 'Selalu balik ke tengah di tengah bit', simple: 'Kayak lompat-lompat, terus balik ke tengah', icon:'⚡' },
        { name: 'Manchester (Biphase)', path: generateManchester(bits), color: '#10b981', desc: '0 = turun (High→Low), 1 = naik (Low→High)', simple: 'Kayak naik-turun tangga!', icon:'📈' },
        { name: 'Miller Code (Delay Modulation)', path: generateMiller(bits), color: '#f59e0b', desc: '1 = lompat di AWAL, 0 = tergantung', simple: 'Agak ribet, tapi tenang!', icon:'🔄' },
        { name: 'AMI (Alternate Mark Inversion)', path: generateAMI(bits), color: '#ef4444', desc: '0 = di TENGAH, 1 = naik-turun bergantian (+V/-V)', simple: '0 = lurus tengah, 1 = naik-turun', icon:'🔀' }
      ];
    }

    // Render UI for a given input value
    function renderFor(value) {
      const val = (value || '').toUpperCase();
      inputText.value = val;

      if (!val) {
        hintEmpty.style.display = '';
        results.style.display = 'none';
        return;
      }

      hintEmpty.style.display = 'none';
      results.style.display = '';

      const binaryData = textToBinary(val);
      const allBits = binaryData.map(d => d.binary).join('');
      const bits = allBits.split('');
      const svgWidth = Math.max(800, bits.length * 15);

      // char list
      charList.innerHTML = '';
      binaryData.forEach(d => {
        const row = document.createElement('div');
        row.className = 'flex';
        row.innerHTML = `
          <div class="char-box" style="min-width:44px;text-align:center">${d.char}</div>
          <div class="muted" style="font-weight:700">=</div>
          <div class="small" style="background:#fff;padding:6px;border-radius:6px;border:1px solid #eef6ff">ASCII: ${d.ascii}</div>
          <div class="muted">=</div>
          <div style="font-family:monospace;font-weight:700;background:#f0fdf4;padding:6px;border-radius:6px;border:1px solid #dcfce7">${d.binary}</div>
        `;
        charList.appendChild(row);
      });

      fullBinary.textContent = allBits;
      bitCount.textContent = `✅ Total: ${bits.length} bits (${val.length} karakter × 8 bit)`;

      // Techniques
      const techniques = getTechniques(bits, binaryData, svgWidth);
      techniquesWrap.innerHTML = '';

      techniques.forEach((tech, idx) => {
        const wrap = document.createElement('div');
        wrap.className = 'tech-card';

        // header
        const header = document.createElement('div');
        header.innerHTML = `
          <div class="tech-title" style="color:${tech.color}">${idx+1}. ${tech.icon} ${tech.name}</div>
          <div class="small muted" style="margin-top:6px"><strong>Aturan:</strong> ${tech.desc}</div>
          <div class="small" style="margin-top:6px;color:${tech.color}">💡 ${tech.simple}</div>
        `;

        // SVG area
        const svgArea = document.createElement('div');
        svgArea.className = 'wave-wrap';
        svgArea.style.marginTop = '10px';
        svgArea.innerHTML = createSVG(tech.path, tech.color, bits, binaryData, svgWidth);

        wrap.appendChild(header);
        wrap.appendChild(svgArea);
        techniquesWrap.appendChild(wrap);
      });
    }

    // Create SVG markup string
    function createSVG(pathD, color, bits, binaryData, svgWidth){
      // grid lines and labels similar to original
      let bitLabels = '';
      bits.forEach((b,i) => {
        const x = i*15 + 7.5;
        const fill = (b === '1') ? color : '#6b7280';
        bitLabels += `<text x="${x}" y="115" text-anchor="middle" font-size="11" font-weight="700" fill="${fill}">${b}</text>`;
      });

      let charLabels = '';
      binaryData.forEach((d,i) => {
        const x = i*120 + 60;
        charLabels += `<text x="${x}" y="135" text-anchor="middle" font-size="14" font-weight="700" fill="#1e40af">'${d.char}'</text>`;
      });

      // character separators
      let charSeparators = '';
      binaryData.forEach((_,i) => {
        const x = i*120;
        charSeparators += `<line x1="${x}" y1="0" x2="${x}" y2="100" stroke="#cbd5e1" stroke-width="2" stroke-dasharray="3,3"></line>`;
      });

      return `
        <svg width="${svgWidth}" height="140" viewBox="0 0 ${svgWidth} 140" xmlns="http://www.w3.org/2000/svg" >
          <rect x="0" y="0" width="${svgWidth}" height="140" fill="transparent"></rect>
          <line x1="0" y1="10" x2="${svgWidth}" y2="10" stroke="#e5e7eb" stroke-width="1" stroke-dasharray="5,5"/>
          <line x1="0" y1="50" x2="${svgWidth}" y2="50" stroke="#9ca3af" stroke-width="1" stroke-dasharray="5,5"/>
          <line x1="0" y1="90" x2="${svgWidth}" y2="90" stroke="#e5e7eb" stroke-width="1" stroke-dasharray="5,5"/>
          ${charSeparators}
          ${bitLabels}
          ${charLabels}
          <path d="${pathD}" fill="none" stroke="${color}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
          <text x="${svgWidth - 30}" y="15" class="level-text">+V</text>
          <text x="${svgWidth - 30}" y="55" class="level-text">0V</text>
          <text x="${svgWidth - 30}" y="95" class="level-text">-V</text>
        </svg>
      `;
    }

    // Event
    inputText.addEventListener('input', (e) => {
      const v = e.target.value.toUpperCase();
      // set caret-friendly update
      renderFor(v);
    });

    // initial (empty)
    renderFor('');

    // Bonus: prefill example for convenience (uncomment if you want automatic sample)
    // renderFor('ANDI');
  </script>
</body>
</html>
